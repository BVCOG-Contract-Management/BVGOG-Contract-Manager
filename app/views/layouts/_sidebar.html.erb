<% # This is the main application sidebar %>
<% # It should have a tab highlighted depending on the active page %>

<% # The sidebar is a Bulma panel %>
<% # https://bulma.io/documentation/components/panel/ %>

<div>
  <div id="sidebar-header" class="sidebar-logo">
    <h3 class="subtitle is-6">Contract Manager</h3>
  </div>
  <aside class="sidebar-main menu">
    <% page_list.each do |page| %>
      <p class="menu-label">
        <%= page[:title] %>
      </p>
      <ul class="menu-list">
        <% page[:subpaths].each do |item| %>
          <% if url_for(only_path: true) == item[:path] %>
            <%= link_to(url_for(item[:path]), class: "sidebar-item has-background-light menu-item has-text-black-bis") do %>
              <%= raw("<i class=\"fa-regular fa-#{item[:icon]}\"></i>") %>
              <%= item[:name] %>
            <% end %>

          <% else %>
            <%= link_to(url_for(item[:path]), class: "sidebar-item menu-item has-text-link-light") do %>
              <i class="fa-regular fa-<%= item[:icon] %>"></i>
              <%= item[:name] %>
            <% end %>
          <% end %>
        <% end %>
      </ul>
    <% end %>
  </aside>
</div>
