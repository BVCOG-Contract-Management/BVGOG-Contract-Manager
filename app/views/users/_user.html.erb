<div id="user-show">
    <div class="columns is-desktop">
        <div class="column is-6">
            <div class="card">
                <header class="card-header">
                    <p class="card-header-title">
                        User Details
                    </p>
                </header>
                <div class="card-content is-paddingless">
                    <table class="table is-striped is-hoverable is-fullwidth">
                        <tbody>
                            <tr>
                                <td><strong>First Name:</strong></td>
                                <td><%= @user.first_name %></td>
                            </tr>
                            <tr>
                                <td><strong>Last Name:</strong></td>
                                <td><%= @user.last_name %></td>
                            </tr>
                            <tr>
                                <td><strong>Email:</strong></td>
                                <td><%= @user.email %></td>
                            </tr>
                            <tr>
                                <td><strong>Level:</strong></td>
                                <td><%= @user.level_int %></td>
                            </tr>
                            <tr>
                                <td><strong>Program Manager:</strong></td>
                                <td>
                                    <% if @user.is_program_manager%>
                                        <span class="tag is-success">Yes</span>
                                    <% else %>
                                        <span class="tag is-danger">No</span>
                                    <% end %>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Active:</strong></td>
                                <td>
                                    <% if @user.is_active%>
                                        <span class="tag is-success">Yes</span>
                                    <% else %>
                                        <span class="tag is-danger">No</span>
                                    <% end %>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <% if current_user.level != UserLevel::THREE %>
                    <footer class="card-footer">
                        <%= link_to "Edit this user", edit_user_path(@user), class: "card-footer-item" %>
                        <%= link_to "Redirect this user", redirect_user_path(@user), class: "card-footer-item" %>
                        <div class= "card-footer-item" id="disable-user-modal-open-btn">
                            <% if @user.is_active %>
                                Disable this user
                            <% else %>
                                Enable this user
                            <% end %>
                        </div>
                    </footer>
                <% end %>
            </div>
        </div>
</div>

<%# Disable user modal %>
<div class="modal" id="disable-user-modal">
  <div class="modal-background"></div>
  <div class="modal-card">
    <header class="modal-card-head">
        <% if @user.is_active %>
            <p class="modal-card-title">Disable <%= @user.full_name %></p>
        <% else %>
            <p class="modal-card-title">Enable <%= @user.full_name %></p>
        <% end %>
    </header>
    <section class="modal-card-body">
      <% if @user.is_active %>
            <p><strong>Are you sure you want to disable <%= @user.full_name %>?</strong></p>
            <p>This will prevent them from logging in and using the system.</p>
        <% else %>
            <p><strong>Are you sure you want to enable <%= @user.full_name %>?</strong></p>
            <p>This will allow them to log in and use the system.</p>
        <% end %>
    </section>
    <footer class="modal-card-foot">
    <%= link_to user_path(@user, params: { user: { is_active: !@user.is_active } }), data: { "turbo-method": :put }, class: @user.is_active ? "button is-danger" : "button is-success" do %>
        <% if @user.is_active %>
            Disable
        <% else %>
            Enable
        <% end %>
    <% end %>
      <button class="button modal-close-btn">Cancel</button>
    </footer>
  </div>
</div>